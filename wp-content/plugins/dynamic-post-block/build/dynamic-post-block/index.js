(()=>{"use strict";var e={n:t=>{var o=t&&t.__esModule?()=>t.default:()=>t;return e.d(o,{a:o}),o},d:(t,o)=>{for(var l in o)e.o(o,l)&&!e.o(t,l)&&Object.defineProperty(t,l,{enumerable:!0,get:o[l]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t)};const t=window.wp.blocks,o=window.wp.i18n,l=window.wp.blockEditor,s=window.wp.components,a=window.wp.element,n=window.wp.data,r=window.wp.apiFetch;var c=e.n(r);const i=window.ReactJSXRuntime,d=window.React,u=JSON.parse('{"UU":"create-block/dynamic-post-block"}');(0,t.registerBlockType)(u.UU,{edit:function({attributes:e,setAttributes:t}){const{postCount:r,postTag:u,postCategory:p,fontFamily:g,textColor:b,backgroundColor:m,backgroundOpacity:h}=e,[_,y]=(0,a.useState)([]),[f,x]=(0,a.useState)(!1),[w,j]=(0,a.useState)(null),[C,k]=(0,a.useState)(null),v=(0,n.useSelect)((e=>e("core").getEntityRecords("taxonomy","post_tag",{per_page:-1})||[]),[]),S=(0,n.useSelect)((e=>e("core").getEntityRecords("taxonomy","category",{per_page:-1})||[]),[]);(0,a.useEffect)((()=>{if(v.length>0&&u){const e=v.find((e=>e.slug===u));j(e?e.id:null)}}),[v,u]),(0,a.useEffect)((()=>{if(S.length>0&&p){const e=S.find((e=>e.slug===p));k(e?e.id:null)}}),[S,p]),(0,a.useEffect)((()=>{(async()=>{x(!0);try{let e=`/wp/v2/posts?per_page=${r+1}&_embed`;null!==w&&(e+=`&tags=${w}`),null!==C&&(e+=`&categories=${C}`);const t=(await c()({path:e})).slice(1);y(t)}catch(e){console.error("Error fetching posts:",e)}finally{x(!1)}})()}),[w,C,r]);const $=m?`rgba(${parseInt(m.slice(1,3),16)}, \n                 ${parseInt(m.slice(3,5),16)}, \n                 ${parseInt(m.slice(5,7),16)}, \n                 ${h})`:"transparent",N=(0,l.useBlockProps)({style:{color:b,backgroundColor:$}});return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(l.InspectorControls,{children:(0,i.jsxs)(s.PanelBody,{title:(0,o.__)("Post Settings","custom-posts-block"),children:[(0,i.jsx)(s.TextControl,{label:(0,o.__)("Number of Posts","custom-posts-block"),type:"number",value:r,onChange:e=>t({postCount:parseInt(e)||0})}),(0,i.jsx)(s.SelectControl,{label:(0,o.__)("Select Tag","custom-posts-block"),value:u,options:v&&v.length>0?[{label:(0,o.__)("All Tags","custom-posts-block"),value:""},...v.map((e=>({label:e.name,value:e.slug})))]:[{label:(0,o.__)("Loading...","custom-posts-block"),value:""}],onChange:e=>t({postTag:e})}),(0,i.jsx)(s.RadioControl,{label:(0,o.__)("Select Category","custom-posts-block"),selected:p,options:S&&S.length>0?[{label:(0,o.__)("All Categories","custom-posts-block"),value:""},...S.map((e=>({label:e.name,value:e.slug})))]:[{label:(0,o.__)("Loading...","custom-posts-block"),value:""}],onChange:e=>t({postCategory:e})}),(0,i.jsx)("label",{children:(0,i.jsx)("strong",{children:"Text Color:"})}),(0,i.jsx)(s.ColorPalette,{colors:[{name:"Black",color:"#000000"},{name:"White",color:"#ffffff"},{name:"default",color:"#555555"}],value:b,onChange:e=>t({textColor:e})}),(0,i.jsx)("label",{children:(0,i.jsx)("strong",{children:"Background Color:"})}),(0,i.jsx)(s.ColorPalette,{colors:[{name:"Black",color:"#000000"},{name:"White",color:"#ffffff"}],value:m,onChange:e=>t({backgroundColor:e})}),(0,i.jsx)("label",{children:(0,i.jsx)("strong",{children:"Background Opacity:"})}),(0,i.jsx)(s.RangeControl,{value:h,onChange:e=>t({backgroundOpacity:e}),min:0,max:1,step:.1}),(0,i.jsx)(s.SelectControl,{label:(0,o.__)("Select Typography"),value:g,options:[{label:(0,o.__)("Inter"),value:"Inter, sans-serif"},{label:(0,o.__)("Roboto"),value:"Roboto, sans-serif"}],onChange:e=>{t({fontFamily:e})}})]})}),(0,i.jsxs)("div",{...N,style:{fontFamily:g},children:[f&&(0,i.jsx)("p",{children:(0,o.__)("Loading posts...","custom-posts-block")}),!f&&0===_.length&&(0,i.jsx)("p",{children:(0,o.__)("No posts found.","custom-posts-block")}),!f&&_.length>0&&(0,i.jsx)("div",{className:r<3?"card-contain2":"card-contain",children:_.map((e=>{const t=e._embedded?.["wp:featuredmedia"]?.[0]?.source_url,o=`By ${e._embedded?.author[0].name} ${(()=>{const t=new Date(e.date);let o=t.getDate(),l=t.getMonth(),s=t.getFullYear();return`${o} ${["January","February","March","April","May","June","July","August","September","October","November","December"][[l]]} ${s}`})()}`;let l=e.title.rendered.replace(/<p.*?>|<\/p>/g,"").match(/^(\b\w+\b(?:\s+\b\w+\b){0,19})/),s=e._embedded?.["wp:term"]?.[0]?.[0]?.name;return(0,d.createElement)("div",{...N,className:"card",key:e.id},(0,i.jsx)("a",{href:e.link,children:(0,i.jsxs)("div",{style:{color:N.style.color},children:[t?(0,i.jsx)("img",{src:t,alt:e.title.rendered,style:{width:"100%",height:1==r?"250px":"auto"}}):(0,i.jsx)("div",{class:"no-image-posts",children:"Â "}),(0,i.jsx)("h4",{className:"card_artical_title",children:s}),(0,i.jsx)("h3",{style:{color:N.style.color},className:"card_artical_text",children:l}),(0,i.jsx)("h4",{className:"card_artical_title",children:o})]})}))}))})]})]})}})})();