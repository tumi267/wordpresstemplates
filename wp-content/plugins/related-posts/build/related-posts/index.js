(()=>{"use strict";var e={n:t=>{var o=t&&t.__esModule?()=>t.default:()=>t;return e.d(o,{a:o}),o},d:(t,o)=>{for(var a in o)e.o(o,a)&&!e.o(t,a)&&Object.defineProperty(t,a,{enumerable:!0,get:o[a]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t)};const t=window.wp.blocks,o=window.wp.i18n,a=window.wp.blockEditor,r=window.wp.components,l=window.wp.element,s=window.wp.apiFetch;var n=e.n(s);const c=window.wp.url,d=window.wp.data,i=window.wp.coreData,u=window.ReactJSXRuntime,p=JSON.parse('{"UU":"create-block/related-posts"}');(0,t.registerBlockType)(p.UU,{edit:function({attributes:e,setAttributes:t}){const{postCount:s,fontFamily:p,textColor:m,backgroundColor:g,backgroundOpacity:h}=e,[b,w]=(0,l.useState)([]),[f,x]=(0,l.useState)(!0),[y,j]=(0,l.useState)(!1),C=(0,d.useSelect)((e=>e(i.store).getEditedEntityRecord("postType","post",wp.data.select("core/editor").getCurrentPostId())),[]);(0,l.useEffect)((()=>{C&&(async()=>{try{const e={categories:C.categories[0],_embed:!0,per_page:s||6},t=(0,c.addQueryArgs)("/wp/v2/posts",e),o=(await n()({path:t})).map((e=>({...e,featuredImage:e._embedded?.["wp:featuredmedia"]?.[0]?.source_url||"/default-image.jpg",authorName:e._embedded?.author?.[0]?.name||"Unknown"})));w(o),x(!1)}catch(e){console.error("Error fetching related posts:",e),x(!1)}})()}),[C,s,y]);const _=g?`rgba(${parseInt(g.slice(1,3),16)}, \n            ${parseInt(g.slice(3,5),16)}, \n            ${parseInt(g.slice(5,7),16)}, \n            ${h})`:"transparent",k=(0,a.useBlockProps)({style:{color:m,backgroundColor:_}});return(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)(a.InspectorControls,{children:(0,u.jsxs)(r.PanelBody,{title:(0,o.__)("Post Settings","custom-posts-block"),children:[(0,u.jsx)(r.TextControl,{label:(0,o.__)("Number of Posts","custom-posts-block"),type:"number",value:s,onChange:e=>{t({postCount:parseInt(e)||6}),j((e=>!e))}}),(0,u.jsx)("label",{children:(0,u.jsx)("strong",{children:"Text Color:"})}),(0,u.jsx)(r.ColorPalette,{colors:[{name:"Black",color:"#000000"},{name:"White",color:"#ffffff"},{name:"default",color:"#555555"}],value:m,onChange:e=>t({textColor:e})}),(0,u.jsx)("label",{children:(0,u.jsx)("strong",{children:"Background Color:"})}),(0,u.jsx)(r.ColorPalette,{colors:[{name:"Black",color:"#000000"},{name:"White",color:"#ffffff"}],value:g,onChange:e=>t({backgroundColor:e})}),(0,u.jsx)("label",{children:(0,u.jsx)("strong",{children:"Background Opacity:"})}),(0,u.jsx)(r.RangeControl,{value:h,onChange:e=>t({backgroundOpacity:e}),min:0,max:1,step:.1}),(0,u.jsx)(r.SelectControl,{label:(0,o.__)("Select Typography"),value:p,options:[{label:(0,o.__)("Inter"),value:"Inter, sans-serif"},{label:(0,o.__)("Roboto"),value:"Roboto, sans-serif"}],onChange:e=>{t({fontFamily:e})}})]})}),(0,u.jsxs)("div",{style:{fontFamily:p},className:"related_contain",children:[f&&(0,u.jsx)("p",{children:"Loading related posts..."}),!f&&0===b.length&&(0,u.jsx)("p",{children:"No related posts available."}),!f&&b.length>0&&(0,u.jsx)("div",{...k,style:{fontFamily:p},children:(0,u.jsx)("ul",{className:"related-posts-list",children:b.map((e=>{let t=e._embedded?.["wp:term"]?.[0]?.[0]?.name;const o=new Date(e.date).getFullYear(),a=(new Date).getFullYear();return(0,u.jsx)("li",{className:"related-post-item",children:(0,u.jsx)("a",{href:e.link,className:"related-post-link",children:(0,u.jsxs)("div",{style:{backgroundColor:k.style.backgroundColor},children:["/default-image.jpg"!==e.featuredImage?(0,u.jsx)("img",{src:e.featuredImage,alt:e.title.rendered,className:"related-post-image"}):(0,u.jsx)("div",{className:"no-image",children:"Â "}),o<a&&(0,u.jsx)("div",{className:"achrive_post",children:(0,u.jsx)("h4",{children:"ARCHIVE"})}),(0,u.jsx)("h4",{className:"related_card_byline",children:t}),(0,u.jsx)("h3",{style:{color:k.style.color},children:e.title.rendered}),(0,u.jsxs)("h4",{className:"related_card_byline",children:["By ",e.authorName," on ",(()=>{const t=new Date(e.date);let o=t.getDate(),a=t.getMonth(),r=t.getFullYear();return`${o} ${["January","February","March","April","May","June","July","August","September","October","November","December"][[a]]} ${r}`})()]})]})})},e.id)}))})})]})]})}})})();