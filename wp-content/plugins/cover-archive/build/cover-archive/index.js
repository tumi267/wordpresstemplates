(()=>{"use strict";var e={n:t=>{var o=t&&t.__esModule?()=>t.default:()=>t;return e.d(o,{a:o}),o},d:(t,o)=>{for(var r in o)e.o(o,r)&&!e.o(t,r)&&Object.defineProperty(t,r,{enumerable:!0,get:o[r]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t)};const t=window.wp.blocks,o=window.wp.i18n,r=window.wp.blockEditor,s=window.wp.components,l=window.wp.element,n=window.wp.apiFetch;var a=e.n(n);const c=window.ReactJSXRuntime,i=JSON.parse('{"UU":"create-block/cover-archive"}');(0,t.registerBlockType)(i.UU,{edit:function({attributes:e,setAttributes:t}){const{postTitle:n,postExcerpt:i,postImage:p,postArticle:d,postCategory:h,postAuthor:g,postDate:u,showByLine:x,showTitle:w,showExcurpt:b,fontFamily:m,textColor:y,backgroundColor:_,backgroundOpacity:C,postId:v}=e,[j,k]=(0,l.useState)((new Date).getFullYear()),[f,I]=(0,l.useState)(!1),T=(0,l.useCallback)((async()=>{if(j){I(!0);try{const e=`/wp/v2/posts?per_page=1&order=desc&_embed&before=${j}-01-01T00:00:00`,o=await a()({path:e});if(o.length>0){const e=o[0],r=()=>{const t=new Date(e.date);return`${t.getDate()} ${t.toLocaleString("default",{month:"long"})} ${t.getFullYear()}`},s=`${e._embedded?.author?.[0]?.name||"Unknown Author"} ${r()}`;t({postTitle:e.title.rendered,postExcerpt:e.excerpt?.rendered||"",postImage:e._embedded?.["wp:featuredmedia"]?.[0]?.source_url||"",postArticle:e.link,postCategory:e._embedded?.["wp:term"]?.[0]?.[0]?.name||"",postAuthor:s,postDate:e.date,showTitle:w,showExcurpt:b,showByLine:x,postId:e.id.toString()})}else t({postTitle:"",postExcerpt:"",postImage:"",postArticle:"",postCategory:"",postAuthor:"",postDate:"",postId:""})}catch(e){console.error("Error fetching posts:",e),t({postTitle:"",postExcerpt:"",postImage:"",postArticle:"",postCategory:"",postAuthor:"",postDate:""})}finally{I(!1)}}}),[j,t]);(0,l.useEffect)((()=>{T()}),[T]);const $=_?`rgba(${parseInt(_.slice(1,3),16)}, \n\t\t\t\t ${parseInt(_.slice(3,5),16)}, \n\t\t\t\t ${parseInt(_.slice(5,7),16)}, \n\t\t\t\t ${C})`:"transparent",E=(0,r.useBlockProps)({style:{color:y,backgroundColor:$}});return(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)(r.InspectorControls,{children:(0,c.jsxs)(s.PanelBody,{title:(0,o.__)("Settings","dynamic-cover-block"),children:[(0,c.jsx)(s.TextControl,{label:(0,o.__)("Enter Year","dynamic-cover-block"),type:"number",value:j||"",onChange:e=>k(e),min:"2000",max:(new Date).getFullYear()+1}),(0,c.jsx)("label",{children:(0,c.jsx)("strong",{children:"Text Color:"})}),(0,c.jsx)(s.ColorPalette,{value:y,onChange:e=>t({textColor:e})}),(0,c.jsx)("label",{children:(0,c.jsx)("strong",{children:"Background Color:"})}),(0,c.jsx)(s.ColorPalette,{value:_,onChange:e=>t({backgroundColor:e})}),(0,c.jsx)(s.RangeControl,{label:"Background Opacity",value:C,onChange:e=>t({backgroundOpacity:e}),min:0,max:1,step:.1}),(0,c.jsx)(s.SelectControl,{label:(0,o.__)("Select Typography"),value:m,options:[{label:(0,o.__)("Inter"),value:"Inter, sans-serif"},{label:(0,o.__)("Roboto"),value:"Roboto, sans-serif"}],onChange:e=>t({fontFamily:e})}),(0,c.jsx)(s.ToggleControl,{checked:!!w,label:(0,o.__)("Show Title","dynamic-cover-block"),onChange:()=>t({showTitle:!w})}),(0,c.jsx)(s.ToggleControl,{checked:!!b,label:(0,o.__)("Show Excerpt","dynamic-cover-block"),onChange:()=>t({showExcurpt:!b})}),(0,c.jsx)(s.ToggleControl,{checked:!!x,label:(0,o.__)("Show Byline","dynamic-cover-block"),onChange:()=>t({showByLine:!x})})]})}),(0,c.jsx)("div",{...(0,r.useBlockProps)(),style:{fontFamily:m,color:y,backgroundColor:`rgba(${parseInt(_.slice(1,3),16)}, ${parseInt(_.slice(3,5),16)}, ${parseInt(_.slice(5,7),16)}, ${C})`},children:f?(0,c.jsx)("p",{children:"Loading..."}):n?(0,c.jsxs)("div",{className:"cover_contain_archive",children:[(0,c.jsx)("a",{href:d,children:(0,c.jsxs)("div",{className:"cover_text",style:{color:E.style.color},children:[u&&(0,c.jsx)("div",{className:"cover_achrive_post_cover","data-postid":v,children:(0,c.jsx)("h3",{children:"ARCHIVE"})}),w&&(0,c.jsx)("h1",{children:n}),b&&(0,c.jsx)("h3",{className:"excurpt_cover",dangerouslySetInnerHTML:{__html:i}}),x&&g&&(0,c.jsxs)("h4",{children:["By: ",g]})]})}),p&&(0,c.jsx)("img",{className:"post_img",src:p,alt:n})]}):(0,c.jsxs)("p",{children:["No posts found for ",j,"."]})})]})}})})();